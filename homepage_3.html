
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>흔들갈대</title>
<style>
  body {
    margin: 0;
    font-family: 'Arial', sans-serif;
    background-color: #f0f0f0;
  }
  #password-screen {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background-color: #4a665b;
    color: #fff;
  }
  #password-screen input {
    padding: 10px;
    font-size: 16px;
    border: none;
    border-radius: 5px;
    margin-top: 10px;
  }
  #main-content {
    display: none;
  }
</style>
</head>
<body>

<div id="password-screen">
  <form id="password-form" onsubmit="return checkPassword(event)" style="display: flex; flex-direction: column; align-items: center;">
    <h2 style="font-size: 24px; margin-bottom: 20px;">🔐 비밀번호를 입력하세요</h2>
    <input type="password" id="password" placeholder="비밀번호 입력" style="padding: 12px; font-size: 18px; border-radius: 8px; border: 1px solid #ccc; width: 250px;" required>
    <button type="submit" style="margin-top: 15px; padding: 10px 20px; font-size: 16px; border: none; border-radius: 8px; background-color: #8fa88e; color: white; cursor: pointer;">입장</button>
    <p id="error-msg" style="color: #ffdddd; margin-top: 12px;"></p>
  </form>
</div>

  <p id="error-msg" style="color: pink; margin-top: 10px;"></p>
</div>
<div id="main-content">
<!DOCTYPE html>

<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>흔들갈대 HOME</title>
<style>
        /* 기본 스타일 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, 'Nanum Gothic', sans-serif;
        }
        
        body {
            background-color: #d7d5cb;
            color: #2c3e50;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.15);
            border-radius: 8px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        header {
            background-color: #5f7561;
            color: white;
            padding: 30px 0;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(95, 117, 97, 0.7);
            z-index: 1;
        }
        
        header h1, header p {
            position: relative;
            z-index: 2;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        nav {
            display: flex;
            justify-content: center;
            margin-bottom: 25px;
            background-color: #34403a;
            padding: 12px;
            border-radius: 8px;
            flex-wrap: wrap;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            padding: 10px 18px;
            margin: 5px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        nav a:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .active {
            background-color: #9ab39c;
            color: #34403a;
        }
        
        .tab-content {
            display: none;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .tab-content.active {
            display: block;
        }
        
        h2 {
            color: #34403a;
            margin-bottom: 20px;
        }
        
        /* 일기장 스타일 */
        .diary-entry {
            background-color: #f9f9f9;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            border-left: 4px solid #9ab39c;
        }
        
        .diary-date {
            font-weight: bold;
            color: #5f7561;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid #eee;
        }
        
        .diary-content {
            white-space: pre-wrap;
            line-height: 1.7;
        }
        
        .diary-meta {
            margin-top: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            color: #888;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }
        
        /* 버튼 스타일 */
        button {
            background-color: #5f7561;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 5px;
        }
        
        button:hover {
            background-color: #34403a;
        }
        
        button.delete-btn {
            background-color: #e74c3c;
        }
        
        /* 폼 스타일 */
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        /* 할일 스타일 */
        .todo-item {
            background-color: #f9f9f9;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid #9ab39c;
        }
        
        .todo-text {
            flex: 1;
            display: flex;
            align-items: center;
        }
        
        .todo-text input[type="checkbox"] {
            margin-right: 10px;
        }
        
        /* 달력 공통 스타일 */
        .calendar-table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed; /* 칸 크기 고정 */
        }
        
        .calendar-table th {
            background-color: #f0f0f0;
            padding: 8px;
            border: 1px solid #ddd;
        }
        
        .calendar-table td {
            border: 1px solid #ddd;
            height: 80px; /* 고정 높이 */
            vertical-align: top;
            position: relative;
            width: 14.28%; /* 모든 열의 너비를 동일하게 */
            overflow: hidden; /* 내용이 넘치면 숨김 */
        }
        
        .calendar-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 15px 0;
        }
        
        .calendar-title {
            font-weight: bold;
        }
        
        .day-number {
            font-weight: bold;
            margin-bottom: 5px;
            display: block;
        }
        
/* 체중 기록 중앙 정렬 스타일 */
.weight-entry {
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 16px;
    font-weight: bold;
    color: #3b82f6;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: rgba(235, 245, 251, 0.7);
    padding: 4px 8px;
    border-radius: 5px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    z-index: 2;
}

/* 달력 셀 위치 관련 설정 */
.calendar-table td {
    border: 1px solid #ddd;
    height: 80px;
    vertical-align: top;
    position: relative;
    width: 14.28%;
    overflow: visible; /* 체중 표시가 잘리지 않도록 변경 */
}

        /* 할일 달력 스타일 */
        .todo-entry {
            display: flex;
            align-items: center;
            font-size: 12px;
            margin-top: 4px;
            max-width: 100%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .todo-entry input[type="checkbox"] {
            margin-right: 4px;
            flex-shrink: 0;
        }
        
        .todo-text.completed {
            text-decoration: line-through;
            color: #888;
        }
        
        /* 스케줄 관리 스타일 */
        .schedule {
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
        }
        
        .schedule table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            overflow: hidden;
            border-radius: 5px;
        }
        
        .schedule th, .schedule td {
            border: 1px solid #e0e0e0;
            padding: 14px;
            text-align: left;
        }
        
        .schedule th {
            background-color: #9ab39c;
            color: white;
            font-weight: 500;
        }
        
        .schedule tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .schedule tr:hover {
            background-color: #d7d5cb;
        }
        
        .schedule-form {
            margin-top: 25px;
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            border-left: 4px solid #9ab39c;
        }
        
        /* 스케줄 보기 방식 */
        .schedule-view-options {
            margin-top: 35px;
        }
        
        .view-options {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .view-option {
            background-color: #d7d5cb;
            border: 1px solid #d0d5d1;
            color: #34403a;
            padding: 10px 18px;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 5px;
            font-weight: 500;
        }
        
        .view-option.active {
            background-color: #5f7561;
            color: white;
            border-color: #5f7561;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
        }
        
        .schedule-view {
            display: none;
        }
        
        .schedule-view.active {
            display: block;
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* 달력 스타일 */
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background-color: #9ab39c;
            padding: 15px;
            border-radius: 8px 8px 0 0;
            color: white;
        }
        
        .calendar-header button {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 8px 15px;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .calendar-header button:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .calendar-grid {
            border: 1px solid #e0e0e0;
            border-radius: 0 0 8px 8px;
            overflow: hidden;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.05);
        }
        
        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            background-color: #d7d5cb;
            font-weight: bold;
        }
        
        .day-name {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .calendar-dates {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            grid-auto-rows: minmax(120px, auto);
            background-color: white;
        }
        
        .calendar-day {
            border: 1px solid #e0e0e0;
            padding: 8px;
            min-height: 120px;
            background-color: white;
            position: relative;
            transition: all 0.2s;
        }
        
        .calendar-day:hover {
            background-color: #f9f9f9;
            transform: scale(1.02);
            z-index: 5;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .day-number {
            position: absolute;
            top: 8px;
            right: 8px;
            font-weight: bold;
            color: #34403a;
        }
        
        .calendar-day.today {
            background-color: #e8f4f1;
            border: 2px solid #9ab39c;
        }
        
        .calendar-day.other-month {
            background-color: #f9f9f9;
            color: #bbb;
        }
        
        .calendar-day.selected {
            background-color: #f5f0e5;
            border: 2px solid #e3b587;
        }
        
        .calendar-day.has-events {
            position: relative;
        }
        
        .calendar-day.has-events::after {
            content: "";
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #e3b587;
            border-radius: 50%;
            top: 8px;
            left: 8px;
            box-shadow: 0 0 5px rgba(227, 181, 135, 0.7);
        }
        
        .event-list {
            margin-top: 25px;
            font-size: 0.85rem;
            overflow: hidden;
        }
        
        .event-item {
            background-color: #5f7561;
            color: white;
            padding: 4px 8px;
            margin-bottom: 3px;
            border-radius: 3px;
            cursor: pointer;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.2s;
        }
        
        .event-item:hover {
            transform: translateX(3px);
            background-color: #34403a;
        }
        
        .event-details {
            margin-top: 25px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: white;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.05);
        }
        
        .event-day-item {
            background-color: white;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
            border-left: 4px solid #9ab39c;
            transition: all 0.2s;
        }
        
        .event-day-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .event-time {
            font-weight: bold;
            color: #5f7561;
            margin-bottom: 5px;
        }
        
        .no-events {
            font-style: italic;
            color: #999;
            text-align: center;
            padding: 15px;
        }
        
        /* 가계부 스타일 */
        .accountbook {
            margin-bottom: 30px;
        }
        
        .accountbook-form {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #9ab39c;
        }
        
        .accountbook-list {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .accountbook-list th {
            background-color: #eef;
            padding: 10px;
            text-align: left;
        }
        
        .accountbook-list td {
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .accountbook-list tr:hover {
            background-color: #f5f5f5;
        }
        
        .accountbook-summary {
            margin: 20px 0;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }
        
        .chart-container {
            background-color: #fdfdfd;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 5px rgba(0,0,0,0.05);
            margin: 20px auto;
            max-width: 650px;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            background-color: #34403a;
            color: white;
            border-radius: 8px;
        }

        /* 헤더 이미지 스타일 */
        .header-image {
            position: relative;
            z-index: 2;
            max-width: 100%;
            height: auto;
            margin-top: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body onload="loadInitialData()">
<!-- 메인 컨텐츠 -->
<div class="container">
<header><img src="logo.png" style="height: 60px; margin-bottom: 10px;"/>

<p id="preview-text">헛되이 보낸 오늘은, 죽은이가 그토록 바라던 내일이었다</p>
<audio autoplay="" hidden="" id="bgm" loop="" src="bgm.mp3"></audio>
</header>
<nav>
<a class="nav-link active" href="#" onclick="showTab('home')">HOME</a>
<a class="nav-link" href="#" onclick="showTab('schedule')">스케줄</a>
<a class="nav-link" href="#" onclick="showTab('diary')">기록</a>
<a class="nav-link" href="#" onclick="showTab('memo')">메모</a>
<a class="nav-link" href="#" onclick="showTab('todo')">뭐해?</a>
<a class="nav-link" href="#" onclick="showTab('weight')">그만먹어</a>
<a class="nav-link" href="#" onclick="showTab('accountbook')">그만써</a>

</nav>
<!-- 탭 컨텐츠 -->
<div class="tab-content active" id="home"><div style="text-align: center; margin-top: 20px;"><video autoplay="True" loop="True" muted="True" style="width: 40%; height: auto; border-radius: 12px; box-shadow: 0 0 20px rgba(0,0,0,0.2);"><source src="video.mp4" type="video/mp4"/>동영상을 재생할 수 없습니다.</video></div></div>
<!-- 스케줄 탭 -->
<div class="tab-content" id="schedule">
<h2>내 스케줄</h2>
<div class="schedule">
<div class="schedule-form">
<h3>새 일정 추가</h3>
<div class="form-group">
<label for="eventTitle">제목</label>
<input id="eventTitle" placeholder="일정 제목을 입력하세요" type="text"/>
</div>
<div class="form-group">
<label for="eventDate">날짜</label>
<input id="eventDate" type="date"/>
</div>
<div class="form-group">
<label for="eventTime">시간</label>
<input id="eventTime" type="time"/>
</div>
<div class="form-group">
<label for="eventDescription">상세 내용</label>
<textarea id="eventDescription" placeholder="일정에 대한 상세 내용을 입력하세요" rows="3"></textarea>
</div>
<button id="addScheduleBtn">일정 추가</button>
</div>
<!-- 스케줄 보기 방식 선택 -->
<div class="schedule-view-options">
<h3>일정 보기</h3>
<div class="view-options">
<button class="view-option active" id="viewListBtn">리스트 형식</button>
<button class="view-option" id="viewCalendarBtn">달력 형식</button>
</div>
</div>
<!-- 리스트 형식 보기 -->
<div class="schedule-view active" id="listView">
<h3>다가오는 일정</h3>
<table id="scheduleTable">
<thead>
<tr>
<th>날짜</th>
<th>시간</th>
<th>제목</th>
<th>상세 내용</th>
<th>작업</th>
</tr>
</thead>
<tbody>
<!-- 일정 항목이 여기에 동적으로 추가됩니다 -->
</tbody>
</table>
</div>
<!-- 달력 형식 보기 -->
<div class="schedule-view" id="calendarView">
<div class="calendar-header">
<button id="prevMonthBtn">&lt;</button>
<h3 id="currentMonthYear">2025년 4월</h3>
<button id="nextMonthBtn">&gt;</button>
</div>
<div class="calendar-grid">
<div class="calendar-days">
<div class="day-name">일</div>
<div class="day-name">월</div>
<div class="day-name">화</div>
<div class="day-name">수</div>
<div class="day-name">목</div>
<div class="day-name">금</div>
<div class="day-name">토</div>
</div>
<div class="calendar-dates" id="calendarDays">
<!-- 달력 날짜가 여기에 동적으로 생성됩니다 -->
</div>
</div>
<div class="event-details" id="eventDetails">
<h3>일정 상세 정보</h3>
<div id="selectedDateEvents">
<!-- 선택된 날짜의 일정이 표시됩니다 -->
<p class="no-events">날짜를 선택하면 일정이 표시됩니다.</p>
</div>
</div>
</div>
</div>
</div>
<!-- 기록(일기) 탭 -->
<div class="tab-content" id="diary">
<h2>일기장</h2>
<div class="form-group">
<label for="diaryDate">날짜</label>
<input id="diaryDate" type="date"/>
</div>
<div class="form-group">
<label for="diaryContent">내용</label>
<textarea id="diaryContent" placeholder="오늘의 일기를 작성하세요..." rows="6"></textarea>
</div>
<button onclick="saveDiary()">저장</button>
<h3 style="margin-top: 30px;">내 일기 목록</h3>
<div id="diaryEntries">
<!-- 일기 항목이 여기에 동적으로 추가됩니다 -->
</div>
</div>
<!-- 메모 탭 -->
<div class="tab-content" id="memo">
<h2>메모장</h2>
<div class="form-group">
<label for="memoTitle">제목</label>
<input id="memoTitle" placeholder="메모 제목" type="text"/>
</div>
<div class="form-group">
<label for="memoContent">내용</label>
<textarea id="memoContent" placeholder="메모 내용을 작성하세요..." rows="4"></textarea>
</div>
<button onclick="saveMemo()">저장</button>
<h3 style="margin-top: 30px;">내 메모 목록</h3>
<div id="memoList">
<!-- 메모 항목이 여기에 동적으로 추가됩니다 -->
</div>
</div>
<!-- 할일 탭 (이름 변경: 할일 -> 뭐해?) -->
<div class="tab-content" id="todo">
<h2>뭐해? (할 일 목록)</h2>
<div class="form-group" style="display: flex; gap: 10px;">
<input id="todoInput" placeholder="할 일을 입력하세요" style="flex: 1;" type="text"/>
<button onclick="addTodo()" style="width: auto;">추가</button>
</div>
<div id="editTodoForm" style="display: none; background-color: #d7d5cb; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
<h3 style="margin-top: 0;">할 일 수정</h3>
<div class="form-group">
<input id="editTodoInput" type="text"/>
<input id="editTodoId" type="hidden"/>
</div>
<div style="display: flex; justify-content: flex-end; gap: 10px;">
<button onclick="updateTodo()">수정 완료</button>
<button onclick="cancelEdit()" style="background-color: #95a5a6;">취소</button>
</div>
</div>
<div id="todoList" style="margin-top: 20px;">
<!-- 할 일 항목이 여기에 동적으로 추가됩니다 -->
</div>
<h3 style="margin-top: 30px;">달력 보기 (간단 표시)</h3>
<div class="calendar-nav">
<button onclick="prevTodoMonth()">◀ 이전달</button>
<span class="calendar-title" id="todoCalendarHeader"></span>
<button onclick="nextTodoMonth()">다음달 ▶</button>
</div>
<table class="calendar-table" id="todoCalendarTable">
<thead>
<tr>
<th>일</th><th>월</th><th>화</th><th>수</th><th>목</th><th>금</th><th>토</th>
</tr>
</thead>
<tbody id="todoCalendarBody"></tbody>
</table>
</div>
<!-- 체중 기록 탭 -->
<div class="tab-content" id="weight">
<h2>⚖️ 체중 기록</h2>
<div id="weightArea">
<div class="form-group" style="display: flex; flex-wrap: wrap; align-items: center; gap: 12px; margin-bottom: 20px;">
<label for="weightDate">날짜</label>
<input id="weightDate" required="" type="date"/>
<label for="weightValue">체중 (kg)</label>
<input id="weightValue" required="" step="0.1" type="number"/>
<button onclick="saveWeight()">기록하기</button>
</div>
<h3>📅 달력 보기</h3>
<div class="calendar-nav">
<button onclick="prevWeightMonth()">◀ 이전 달</button>
<div class="calendar-title" id="calendarTitle">2025년 4월</div>
<button onclick="nextWeightMonth()">다음 달 ▶</button>
</div>
<table class="calendar-table" id="weightCalendarTable">
<thead>
<tr>
<th>일</th><th>월</th><th>화</th><th>수</th><th>목</th><th>금</th><th>토</th>
</tr>
</thead>
<tbody id="calendarBody"></tbody>
</table>
<div class="weight-list-section" style="margin-top: 30px;">
<h3>📋 체중 기록 목록</h3>
<div id="weightListContainer" style="margin-top: 15px;"></div>
</div>
</div>
</div>
<!-- 가계부 탭 (추가) -->
<div class="tab-content" id="accountbook">
<h2>📒 나의 가계부</h2>
<div class="accountbook">
<div class="accountbook-form">
<div class="form-group">
<label for="ab-date">날짜</label>
<input class="form-input" id="ab-date" type="date"/>
</div>
<div class="form-group">
<label for="ab-amount">금액</label>
<input class="form-input" id="ab-amount" type="number"/>
</div>
<div class="form-group">
<label for="ab-type">종류</label>
<select class="form-input" id="ab-type">
<option value="income">수입</option>
<option value="expense">지출</option>
</select>
</div>
<div class="form-group">
<label for="ab-category">카테고리</label>
<select id="ab-category" name="ab-category">
<option value="식비(장보기)">식비(장보기)</option>
<option value="쿠폰 구매">쿠폰 구매</option>
<option value="주전부리">주전부리</option>
<option value="쇼핑">쇼핑</option>
<option value="음식_배달">음식_배달</option>
<option value="음식_온라인 구매">음식_온라인 구매</option>
<option value="외식">외식</option>
<option value="의료비">의료비</option>
<option value="인간관계">인간관계</option>
<option value="운동">운동</option>
<option value="교통비">교통비</option>
<option value="집 관련 물품">집 관련 물품</option>
<option value="가족비">가족비</option>
<option value="매달 고정비">매달 고정비</option>
<option value="문화 생활">문화 생활</option>
<option value="자기계발">자기계발</option>
<option value="업무용">업무용</option>
<option value="공용">공용</option>
<option value="차량 유지비">차량 유지비</option>
<option value="구독">구독</option>
<option value="기타">기타</option>
</select>
</div>
<div class="form-group">
<label for="ab-method">결제 방법</label>
<select id="ab-method" name="ab-method">
<option value="현대카드">현대카드</option>
<option value="삼성카드">삼성카드</option>
<option value="롯데카드">롯데카드</option>
<option value="신한카드">신한카드</option>
<option value="계좌">계좌</option>
<option value="현금">현금</option>
<option value="기타">기타</option>
</select>
</div>
<div class="form-group">
<label for="ab-memo">메모</label>
<textarea id="ab-memo" rows="3"></textarea>
</div>
<button id="ab-submit">기록하기</button>
</div>
<h3>📅 달력 보기</h3>
<div id="ab-calendar" style="min-height:600px; height:600px; margin-bottom:20px; background-color: #f9f9f9; border-radius: 8px; padding: 10px;"></div>
<h3>📃 내역 리스트</h3>
<table class="accountbook-list" id="ab-list">
<thead>
<tr>
<th>날짜</th><th>금액</th><th>종류</th><th>카테고리</th><th>결제</th><th>메모</th><th>작업</th>
</tr>
</thead>
<tbody>
<!-- 가계부 항목이 여기에 동적으로 추가됩니다 -->
</tbody>
</table>
<div class="accountbook-summary" id="ab-summary">
<strong>이번 달 수입:</strong> 0원 | <strong>지출:</strong> 0원
                </div>
<h3>📊 통계 보기</h3>
<div class="chart-container">
<canvas height="200" id="ab-month-summary" style="max-width:600px; margin:20px auto; display:block;"></canvas>
</div>
<div class="chart-container">
<canvas height="200" id="ab-category-summary" style="max-width:600px; margin:20px auto; display:block;"></canvas>
</div>
<div class="chart-container">
<canvas height="200" id="ab-method-summary" style="max-width:600px; margin:20px auto; display:block;"></canvas>
</div>
</div>
</div>
<!-- 홈화면 설정 탭 -->

</div>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.min.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
        // 전역 변수
        let diaries = [];
        let memos = [];
        let todos = [];
        let schedules = [];
        let accountData = []; // 가계부 데이터 추가
        let currentCalendarYear = new Date().getFullYear();
        let currentCalendarMonth = new Date().getMonth();
        let currentTodoYear = new Date().getFullYear();
        let currentTodoMonth = new Date().getMonth();
        let currentScheduleYear = new Date().getFullYear();
        let currentScheduleMonth = new Date().getMonth();
        let selectedDate = null;
        
        // 초기 데이터 로드
        function loadInitialData() {
            document.getElementById("ab-submit")?.addEventListener("click", addAccountItem);

document.getElementById("addScheduleBtn")?.addEventListener("click", addSchedule);

            document.getElementById("ab-submit")?.addEventListener("click", addAccountItem);
            // 로컬 스토리지에서 데이터 로드
            loadDataFromLocalStorage();
            
            loadDiaries();
            loadMemos();
            renderTodos();
            renderTodoCalendar();
            renderWeightCalendar();
            renderWeightList();
            loadSchedules();
            renderScheduleCalendar();
            loadAccountData(); // 가계부 데이터 로드
            applyCustomHome();
            
            // 기본 날짜 설정
            const today = new Date().toISOString().split('T')[0];
            if (document.getElementById('diaryDate')) document.getElementById('diaryDate').value = today;
            if (document.getElementById('weightDate')) document.getElementById('weightDate').value = today;
            if (document.getElementById('eventDate')) document.getElementById('eventDate').value = today;
            if (document.getElementById('ab-date')) document.getElementById('ab-date').value = today;

            // 이벤트 리스너 설정
            document.getElementById('save-button').addEventListener('click', saveCustomHome);
            document.getElementById('addScheduleBtn').addEventListener('click', addSchedule);
            document.getElementById('viewListBtn').addEventListener('click', showListView);
            document.getElementById('viewCalendarBtn').addEventListener('click', showCalendarView);
            document.getElementById('prevMonthBtn').addEventListener('click', prevScheduleMonth);
            document.getElementById('nextMonthBtn').addEventListener('click', nextScheduleMonth);
            
            // 가계부 이벤트 리스너 설정
            if (document.getElementById('ab-submit')) {
                document.getElementById('ab-submit').addEventListener('click', addAccountItem);
            }
            
            // 필요한 외부 라이브러리 로드
            loadRequiredLibraries();
        }
        
        // 필요한 외부 라이브러리 로드 함수
        function loadRequiredLibraries() {
            // FullCalendar 라이브러리 로드
            if (typeof FullCalendar === 'undefined') {
                // CSS 먼저 로드
                const style = document.createElement('link');
                style.rel = 'stylesheet';
                style.href = 'https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.min.css';
                document.head.appendChild(style);
                
                // 그 다음 JS 로드
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.min.js';
                script.onload = function() {
                    // 가계부 탭이 현재 활성화되어 있는 경우에만 달력 초기화
                    if (document.getElementById('accountbook').classList.contains('active')) {
                        // FullCalendar 초기화 전에 약간의 지연 추가
                        setTimeout(function() {
                            // 달력 컨테이너를 초기화
                            const calendarEl = document.getElementById('ab-calendar');
                            if (calendarEl) {
                                calendarEl.innerHTML = '';
                                initializeAccountCalendar();
                            }
                        }, 200);
                    }
                };
                document.head.appendChild(script);
            } else if (document.getElementById('accountbook').classList.contains('active')) {
                // FullCalendar가 이미 로드되어 있지만 달력이 표시되지 않는 경우
                setTimeout(function() {
                    const calendarEl = document.getElementById('ab-calendar');
                    if (calendarEl && !calendarEl.querySelector('.fc')) {
                        calendarEl.innerHTML = '';
                        initializeAccountCalendar();
                    }
                }, 200);
            }
            
            // Chart.js 라이브러리 로드
            if (typeof Chart === 'undefined') {
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/chart.js';
                script.onload = function() {
                    // 가계부 탭이 현재 활성화되어 있는 경우에만 차트 업데이트
                    if (document.getElementById('accountbook').classList.contains('active')) {
                        createCharts();
                    }
                };
                document.head.appendChild(script);
            }
        }
        
        // 로컬 스토리지에서 데이터 로드
        function loadDataFromLocalStorage() {
            try {
                diaries = JSON.parse(localStorage.getItem('diaries')) || [];
                memos = JSON.parse(localStorage.getItem('memos')) || [];
                todos = JSON.parse(localStorage.getItem('todos')) || [];
                schedules = JSON.parse(localStorage.getItem('schedules')) || [];
                accountData = JSON.parse(localStorage.getItem('accountData')) || []; // 가계부 데이터 추가
            } catch (e) {
                console.error('데이터 로드 중 오류 발생:', e);
                diaries = [];
                memos = [];
                todos = [];
                schedules = [];
                accountData = [];
            }
        }
        
        // 탭 전환 기능
        function showTab(tabId) {
            // 모든 탭 비활성화
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // 선택된 탭 활성화
            document.getElementById(tabId).classList.add('active');
            document.querySelector(`.nav-link[onclick="showTab('${tabId}')"]`).classList.add('active');
            
            // 필요한 경우 탭 초기화
            if (tabId === 'diary') loadDiaries();
            if (tabId === 'memo') loadMemos();
            if (tabId === 'todo') {
                renderTodos();
                renderTodoCalendar();
            }
            if (tabId === 'weight') {
                renderWeightCalendar();
                renderWeightList();
            }
            
if (tabId === 'schedule') {
    loadSchedules();
    renderScheduleCalendar();

    // 버튼 리스너 수동 재등록
    const calBtn = document.getElementById('viewCalendarBtn');
    const listBtn = document.getElementById('viewListBtn');
    if (calBtn) {
        calBtn.removeEventListener('click', showCalendarView);
        calBtn.addEventListener('click', showCalendarView);
    }
    if (listBtn) {
        listBtn.removeEventListener('click', showListView);
        listBtn.addEventListener('click', showListView);
    }

            }
            if (tabId === 'accountbook') {
                loadAccountData();
                
                // 달력이 표시되지 않는 문제 해결
                setTimeout(function() {
                    try {
                        const abCalendar = document.getElementById('ab-calendar');
                        if (abCalendar) {
                            // 달력이 제대로 렌더링되지 않았는지 확인
                            const fcContent = abCalendar.querySelector('.fc');
                            if (!fcContent || fcContent.offsetHeight < 10) {
                                console.log("달력 다시 초기화 중...");
                                initializeAccountCalendar();
                            }
                        }
                    } catch (e) {
                        console.error("달력 확인 오류:", e);
                        initializeAccountCalendar();
                    }
                }, 300);
            }
        }
        
        /********** 일기장 기능 **********/
        function saveDiary() {
            const date = document.getElementById('diaryDate').value;
            const content = document.getElementById('diaryContent').value;
            
            if (!date || !content) {
                alert('날짜와 내용을 모두 입력해주세요.');
                return;
            }
            
            // 같은 날짜의 일기가 있는지 확인
            const existingIndex = diaries.findIndex(diary => diary.date === date);
            
            if (existingIndex !== -1) {
                if (confirm('같은 날짜의 일기가 이미 존재합니다. 덮어쓰시겠습니까?')) {
                    diaries[existingIndex].content = content;
                    diaries[existingIndex].updatedAt = new Date().toISOString();
                } else {
                    return;
                }
            } else {
                const diary = {
                    id: Date.now(),
                    date,
                    content,
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                
                diaries.push(diary);
            }
            
            try {
                localStorage.setItem('diaries', JSON.stringify(diaries));
                
                // 입력 필드 초기화
                document.getElementById('diaryContent').value = '';
                
                loadDiaries();
                alert('일기가 저장되었습니다.');
            } catch (e) {
                console.error('일기 저장 중 오류 발생:', e);
                alert('일기 저장 중 오류가 발생했습니다.');
            }
        }
        
        function loadDiaries() {
            const diaryEntries = document.getElementById('diaryEntries');
            if (!diaryEntries) return;
            
            diaryEntries.innerHTML = '';
            
            // 날짜 내림차순으로 정렬 (최신 일기가 위에 표시)
            diaries.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            if (diaries.length === 0) {
                diaryEntries.innerHTML = '<p style="text-align: center; color: #888; padding: 20px;">저장된 일기가 없습니다.</p>';
                return;
            }
            
            diaries.forEach(diary => {
                const entry = document.createElement('div');
                entry.className = 'diary-entry';
                entry.innerHTML = `
                    <div class="diary-date">${formatDate(diary.date)}</div>
                    <div class="diary-content">${diary.content}</div>
                    <div class="diary-meta">
                        마지막 수정: ${formatDateTime(diary.updatedAt)}
                        <div>
                            <button onclick="editDiary(${diary.id})">수정</button>
                            <button class="delete-btn" onclick="deleteDiary(${diary.id})">삭제</button>
                        </div>
                    </div>
                `;
                
                diaryEntries.appendChild(entry);
            });
        }
        
        function editDiary(id) {
            const diary = diaries.find(d => d.id === id);
            if (!diary) return;
            
            document.getElementById('diaryDate').value = diary.date;
            document.getElementById('diaryContent').value = diary.content;
            
            window.scrollTo(0, 0);
            
            // 원래 일기 삭제 (저장 시 새로 추가됨)
            deleteDiaryWithoutConfirm(id);
        }
        
        function deleteDiary(id) {
            if (confirm('이 일기를 삭제하시겠습니까?')) {
                deleteDiaryWithoutConfirm(id);
                alert('일기가 삭제되었습니다.');
            }
        }
        
        function deleteDiaryWithoutConfirm(id) {
            diaries = diaries.filter(diary => diary.id !== id);
            localStorage.setItem('diaries', JSON.stringify(diaries));
            loadDiaries();
        }
        
        /********** 메모 기능 **********/
        function saveMemo() {
            const title = document.getElementById('memoTitle').value;
            const content = document.getElementById('memoContent').value;
            
            if (!title || !content) {
                alert('제목과 내용을 모두 입력해주세요.');
                return;
            }
            
            const memo = {
                id: Date.now(),
                title,
                content,
                createdAt: new Date().toISOString()
            };
            
            memos.push(memo);
            
            try {
                localStorage.setItem('memos', JSON.stringify(memos));
                
                document.getElementById('memoTitle').value = '';
                document.getElementById('memoContent').value = '';
                
                loadMemos();
                alert('메모가 저장되었습니다.');
            } catch (e) {
                console.error('메모 저장 중 오류 발생:', e);
                alert('메모 저장 중 오류가 발생했습니다.');
            }
        }
        
        function loadMemos() {
            const memoList = document.getElementById('memoList');
            if (!memoList) return;
            
            memoList.innerHTML = '';
            
            memos.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            
            if (memos.length === 0) {
                memoList.innerHTML = '<p style="text-align: center; color: #888; padding: 20px;">저장된 메모가 없습니다.</p>';
                return;
            }
            
            memos.forEach(memo => {
                const memoDiv = document.createElement('div');
                memoDiv.className = 'diary-entry';
                memoDiv.innerHTML = `
                    <div class="diary-date">${memo.title}</div>
                    <div class="memo-content">${memo.content}</div>
                    <div class="diary-meta">
                        작성일: ${formatDateTime(memo.createdAt)}
                        <div>
                            <button onclick="editMemo(${memo.id})">수정</button>
                            <button class="delete-btn" onclick="deleteMemo(${memo.id})">삭제</button>
                        </div>
                    </div>
                `;
                
                memoList.appendChild(memoDiv);
            });
        }
        
        function editMemo(id) {
            const memo = memos.find(m => m.id === id);
            if (!memo) return;
            
            document.getElementById('memoTitle').value = memo.title;
            document.getElementById('memoContent').value = memo.content;
            
            window.scrollTo(0, 0);
            
            // 원래 메모 삭제 (저장 시 새로 추가됨)
            deleteMemoWithoutConfirm(id);
        }
        
        function deleteMemo(id) {
            if (confirm('이 메모를 삭제하시겠습니까?')) {
                deleteMemoWithoutConfirm(id);
                alert('메모가 삭제되었습니다.');
            }
        }
        
        function deleteMemoWithoutConfirm(id) {
            memos = memos.filter(memo => memo.id !== id);
            localStorage.setItem('memos', JSON.stringify(memos));
            loadMemos();
        }
        
        /********** 할일 기능 **********/
        function addTodo() {
            const todoInput = document.getElementById('todoInput');
            const text = todoInput.value.trim();
            
            if (!text) {
                alert('할 일을 입력해주세요.');
                return;
            }
            
            const todo = {
                id: Date.now(),
                text: text,
                completed: false,
                date: new Date().toISOString().split('T')[0], // 현재 날짜 저장
                createdAt: new Date().toISOString()
            };
            
            todos.push(todo);
            
            try {
                localStorage.setItem('todos', JSON.stringify(todos));
                
                todoInput.value = '';
                
                renderTodos();
                renderTodoCalendar();
            } catch (e) {
                console.error('할일 저장 중 오류 발생:', e);
                alert('할일 저장 중 오류가 발생했습니다.');
            }
        }
        
        function renderTodos() {
            const todoList = document.getElementById('todoList');
            if (!todoList) return;
            
            todoList.innerHTML = '';
            
            if (todos.length === 0) {
                todoList.innerHTML = '<p style="text-align: center; color: #888; padding: 20px;">할 일이 없습니다. 새로운 할 일을 추가해보세요!</p>';
                return;
            }
            
            todos.sort((a, b) => {
                // 완료되지 않은 항목 먼저
                if (a.completed !== b.completed) {
                    return a.completed ? 1 : -1;
                }
                // 그 다음으로는 최신순
                return new Date(b.createdAt) - new Date(a.createdAt);
            });
            
            todos.forEach(todo => {
                const todoItem = document.createElement('div');
                todoItem.className = 'todo-item';
                todoItem.innerHTML = `
                    <div class="todo-text ${todo.completed ? 'completed' : ''}">
                        <input type="checkbox" ${todo.completed ? 'checked' : ''} onchange="toggleTodo(${todo.id})">
                        <span>${todo.text}</span>
                    </div>
                    <div>
                        <button onclick="editTodo(${todo.id})">수정</button>
                        <button class="delete-btn" onclick="deleteTodo(${todo.id})">삭제</button>
                    </div>
                `;
                
                todoList.appendChild(todoItem);
            });
        }
        
        function renderTodoCalendar() {
            const todoCalendarBody = document.getElementById('todoCalendarBody');
            const todoCalendarHeader = document.getElementById('todoCalendarHeader');
            
            if (!todoCalendarBody || !todoCalendarHeader) return;
            
            todoCalendarHeader.textContent = `${currentTodoYear}년 ${currentTodoMonth + 1}월`;
            
            const firstDay = new Date(currentTodoYear, currentTodoMonth, 1).getDay();
            const daysInMonth = new Date(currentTodoYear, currentTodoMonth + 1, 0).getDate();
            
            todoCalendarBody.innerHTML = '';
            
            let row = document.createElement('tr');
            
            // 첫 주의 빈 셀 채우기
            for (let i = 0; i < firstDay; i++) {
                const td = document.createElement('td');
                row.appendChild(td);
            }
            
            // 날짜 채우기
            for (let day = 1; day <= daysInMonth; day++) {
                const td = document.createElement('td');
                
                // 해당 날짜 문자열
                const dateStr = `${currentTodoYear}-${String(currentTodoMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                
                // 날짜 숫자 표시
                const dayNumber = document.createElement('div');
                dayNumber.className = 'day-number';
                dayNumber.textContent = day;
                td.appendChild(dayNumber);
                
                // 해당 날짜의 할일 체크
                const todosForDate = todos.filter(todo => todo.date === dateStr);
                
                // 할일이 있으면 체크박스로 표시
                if (todosForDate.length > 0) {
                    const todoContainer = document.createElement('div');
                    
                    
    todosForDate.forEach(todo => {
        const todoDiv = document.createElement('div');
        todoDiv.className = 'todo-entry';

        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.checked = todo.completed;

        checkbox.onclick = function(e) {
            e.stopPropagation();
            toggleTodoInCalendar(todo.id);
        };

        const textSpan = document.createElement('span');
        textSpan.textContent = todo.text;
        textSpan.style.overflow = 'hidden';
        textSpan.style.textOverflow = 'ellipsis';
        textSpan.style.whiteSpace = 'nowrap';

        if (todo.completed) {
            textSpan.style.textDecoration = 'line-through';
            textSpan.style.color = '#888';
        }

        todoDiv.appendChild(checkbox);
        todoDiv.appendChild(textSpan);
        todoContainer.appendChild(todoDiv);
    });

    td.appendChild(todoContainer);
    
                    
                    td.appendChild(todoContainer);
                }
                
                row.appendChild(td);
                
                // 토요일이나 월의 마지막 날이면 새 행 시작
                if ((firstDay + day) % 7 === 0 || day === daysInMonth) {
                    todoCalendarBody.appendChild(row);
                    if (day !== daysInMonth) {
                        row = document.createElement('tr');
                    }
                }
            }
        }
        
        function toggleTodo(id) {
            const todo = todos.find(t => t.id === id);
            if (todo) {
                todo.completed = !todo.completed;
                localStorage.setItem('todos', JSON.stringify(todos));
                renderTodos();
                renderTodoCalendar();
            }
        }
        
        function toggleTodoInCalendar(id) {
            const todo = todos.find(t => t.id === id);
            if (todo) {
                todo.completed = !todo.completed;
                localStorage.setItem('todos', JSON.stringify(todos));
                renderTodos();
                renderTodoCalendar();
            }
        }
        
        function editTodo(id) {
            const todo = todos.find(t => t.id === id);
            if (!todo) return;
            
            const editForm = document.getElementById('editTodoForm');
            const editInput = document.getElementById('editTodoInput');
            const editId = document.getElementById('editTodoId');
            
            editForm.style.display = 'block';
            editInput.value = todo.text;
            editId.value = todo.id;
            
            editForm.scrollIntoView({ behavior: 'smooth' });
        }
        
        function updateTodo() {
            const editInput = document.getElementById('editTodoInput');
            const editId = document.getElementById('editTodoId');
            
            const text = editInput.value.trim();
            const id = parseInt(editId.value);
            
            if (!text) {
                alert('할 일을 입력해주세요.');
                return;
            }
            
            const todoIndex = todos.findIndex(t => t.id === id);
            if (todoIndex !== -1) {
                todos[todoIndex].text = text;
                
                try {
                    localStorage.setItem('todos', JSON.stringify(todos));
                    
                    document.getElementById('editTodoForm').style.display = 'none';
                    
                    renderTodos();
                    renderTodoCalendar();
                    
                    alert('할 일이 수정되었습니다.');
                } catch (e) {
                    console.error('할일 수정 중 오류 발생:', e);
                    alert('할일 수정 중 오류가 발생했습니다.');
                }
            }
        }
        
        function cancelEdit() {
            document.getElementById('editTodoForm').style.display = 'none';
        }
        
        function deleteTodo(id) {
            if (confirm('이 할 일을 삭제하시겠습니까?')) {
                todos = todos.filter(todo => todo.id !== id);
                localStorage.setItem('todos', JSON.stringify(todos));
                renderTodos();
                renderTodoCalendar();
                alert('할 일이 삭제되었습니다.');
            }
        }
        
        function prevTodoMonth() {
            currentTodoMonth--;
            if (currentTodoMonth < 0) {
                currentTodoMonth = 11;
                currentTodoYear--;
            }
            renderTodoCalendar();
        }
        
        function nextTodoMonth() {
            currentTodoMonth++;
            if (currentTodoMonth > 11) {
                currentTodoMonth = 0;
                currentTodoYear++;
            }
            renderTodoCalendar();
        }
        
        /********** 체중 기록 기능 **********/
        function saveWeight() {
            const date = document.getElementById('weightDate').value;
            const value = document.getElementById('weightValue').value;
            
            if (!date || !value) {
                alert('날짜와 체중을 모두 입력해주세요.');
                return;
            }
            
            let weightData = {};
            try {
                weightData = JSON.parse(localStorage.getItem('weightRecords') || '{}');
            } catch (e) {
                console.error('체중 데이터 로드 중 오류 발생:', e);
                weightData = {};
            }
            
            if (weightData[date] && !confirm(`${formatDate(date)}에 이미 체중이 기록되어 있습니다. 덮어쓰시겠습니까?`)) {
                return;
            }
            
            weightData[date] = parseFloat(value);
            
            try {
                localStorage.setItem('weightRecords', JSON.stringify(weightData));
                
                document.getElementById('weightValue').value = '';
                
                renderWeightCalendar();
                renderWeightList();
                
                alert('체중이 기록되었습니다.');
            } catch (e) {
                console.error('체중 저장 중 오류 발생:', e);
                alert('체중 저장 중 오류가 발생했습니다.');
            }
        }
        
        function renderWeightCalendar() {
            let weightData = {};
            try {
                weightData = JSON.parse(localStorage.getItem('weightRecords') || '{}');
            } catch (e) {
                console.error('체중 데이터 로드 중 오류 발생:', e);
                weightData = {};
            }
            
            const body = document.getElementById('calendarBody');
            const title = document.getElementById('calendarTitle');
            
            if (!body || !title) return;
            
            title.textContent = `${currentCalendarYear}년 ${currentCalendarMonth + 1}월`;
            
            body.innerHTML = '';
        
            const firstDay = new Date(currentCalendarYear, currentCalendarMonth, 1).getDay();
            const daysInMonth = new Date(currentCalendarYear, currentCalendarMonth + 1, 0).getDate();
        
            let row = document.createElement('tr');
            
            // 첫 주의 빈 셀 채우기
            for (let i = 0; i < firstDay; i++) {
                const td = document.createElement('td');
                row.appendChild(td);
            }
        
            // 날짜 채우기
            for (let day = 1; day <= daysInMonth; day++) {
                const td = document.createElement('td');
                const dateKey = `${currentCalendarYear}-${String(currentCalendarMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                
                // 날짜 표시
                const dayNumber = document.createElement('div');
                dayNumber.className = 'day-number';
                dayNumber.textContent = day;
                td.appendChild(dayNumber);
                
                // 체중 기록이 있으면 표시 (수정/삭제 버튼 없음)
                if (weightData[dateKey]) {
                    const weightDiv = document.createElement('div');
                    weightDiv.className = 'weight-entry';
                    weightDiv.textContent = weightData[dateKey] + "kg";
                    td.appendChild(weightDiv);
                }
                
                row.appendChild(td);
                
                // 토요일이나 월의 마지막 날이면 새 행 시작
                if ((firstDay + day) % 7 === 0 || day === daysInMonth) {
                    body.appendChild(row);
                    if (day !== daysInMonth) {
                        row = document.createElement('tr');
                    }
                }
            }
        }
        
        function renderWeightList() {
            const container = document.getElementById('weightListContainer');
            if (!container) return;
            
            let weightData = {};
            try {
                weightData = JSON.parse(localStorage.getItem('weightRecords') || '{}');
            } catch (e) {
                console.error('체중 데이터 로드 중 오류 발생:', e);
                weightData = {};
            }
            
            const entries = Object.entries(weightData).map(([date, weight]) => ({ date, weight }));
            
            if (entries.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #888;">기록된 체중이 없습니다.</p>';
                return;
            }
            
            entries.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            const table = document.createElement('table');
            table.style.width = '100%';
            table.style.borderCollapse = 'collapse';
            table.style.marginBottom = '20px';
            table.style.background = 'white';
            
            const thead = document.createElement('thead');
            thead.innerHTML = `
                <tr style="background-color: #f0f0f0;">
                    <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">날짜</th>
                    <th style="padding: 10px; text-align: center; border: 1px solid #ddd;">체중</th>
                    <th style="padding: 10px; text-align: center; border: 1px solid #ddd;">관리</th>
                </tr>
            `;
            table.appendChild(thead);
            
            const tbody = document.createElement('tbody');
            entries.forEach(entry => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td style="padding: 10px; border: 1px solid #ddd;">${formatDate(entry.date)}</td>
                    <td style="padding: 10px; text-align: center; border: 1px solid #ddd; font-weight: bold;">${entry.weight} kg</td>
                    <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">
                        <button onclick="editWeight('${entry.date}', ${entry.weight})">수정</button>
                        <button class="delete-btn" onclick="deleteWeight('${entry.date}')">삭제</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            table.appendChild(tbody);
            
            container.innerHTML = '';
            container.appendChild(table);
        }
        
        function editWeight(dateKey, currentValue) {
            const newWeight = prompt(`${formatDate(dateKey)}의 체중을 수정합니다. 새 체중을 입력하세요:`, currentValue);
            
            if (newWeight !== null && !isNaN(newWeight) && newWeight.trim() !== '') {
                let weightData = {};
                try {
                    weightData = JSON.parse(localStorage.getItem('weightRecords') || '{}');
                } catch (e) {
                    console.error('체중 데이터 로드 중 오류 발생:', e);
                    weightData = {};
                }
                
                weightData[dateKey] = parseFloat(newWeight);
                
                try {
                    localStorage.setItem('weightRecords', JSON.stringify(weightData));
                    
                    renderWeightCalendar();
                    renderWeightList();
                    
                    alert('체중 기록이 수정되었습니다.');
                } catch (e) {
                    console.error('체중 수정 중 오류 발생:', e);
                    alert('체중 수정 중 오류가 발생했습니다.');
                }
            }
        }
        
        function deleteWeight(dateKey) {
            if (confirm(`${formatDate(dateKey)}의 체중 기록을 삭제하시겠습니까?`)) {
                let weightData = {};
                try {
                    weightData = JSON.parse(localStorage.getItem('weightRecords') || '{}');
                } catch (e) {
                    console.error('체중 데이터 로드 중 오류 발생:', e);
                    weightData = {};
                }
                
                delete weightData[dateKey];
                
                try {
                    localStorage.setItem('weightRecords', JSON.stringify(weightData));
                    
                    renderWeightCalendar();
                    renderWeightList();
                    
                    alert('체중 기록이 삭제되었습니다.');
                } catch (e) {
                    console.error('체중 삭제 중 오류 발생:', e);
                    alert('체중 삭제 중 오류가 발생했습니다.');
                }
            }
        }
        
        function prevWeightMonth() {
            currentCalendarMonth--;
            if (currentCalendarMonth < 0) {
                currentCalendarMonth = 11;
                currentCalendarYear--;
            }
            renderWeightCalendar();
        }
        
        function nextWeightMonth() {
            currentCalendarMonth++;
            if (currentCalendarMonth > 11) {
                currentCalendarMonth = 0;
                currentCalendarYear++;
            }
            renderWeightCalendar();
        }

        /********** 스케줄 관리 기능 **********/
        function addSchedule() {
            const title = document.getElementById('eventTitle').value;
            const date = document.getElementById('eventDate').value;
            const time = document.getElementById('eventTime').value;
            const description = document.getElementById('eventDescription').value;
            
            if (!title || !date) {
                alert('제목과 날짜는 필수입니다.');
                return;
            }
            
            const schedule = {
                id: Date.now(),
                title,
                date,
                time,
                description
            };
            
            schedules.push(schedule);
            localStorage.setItem('schedules', JSON.stringify(schedules));
            
            // 입력 필드 초기화
            document.getElementById('eventTitle').value = '';
            document.getElementById('eventTime').value = '';
            document.getElementById('eventDescription').value = '';
            
            // 다양한 보기 모드 업데이트
            loadSchedules();
            renderScheduleCalendar();
            
            alert('일정이 추가되었습니다.');
        }

        function loadSchedules() {
            const tbody = document.querySelector('#scheduleTable tbody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            // 날짜순으로 정렬
            schedules.sort((a, b) => new Date(a.date + ' ' + (a.time || '00:00')) - new Date(b.date + ' ' + (b.time || '00:00')));
            
            if (schedules.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" style="text-align:center;">등록된 일정이 없습니다.</td></tr>';
                return;
            }
            
            schedules.forEach(schedule => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${formatDate(schedule.date)}</td>
                    <td>${schedule.time || '-'}</td>
                    <td>${schedule.title}</td>
                    <td>${schedule.description || '-'}</td>
                    <td>
                        <button onclick="editSchedule(${schedule.id})">수정</button>
                        <button class="delete-btn" onclick="deleteSchedule(${schedule.id})">삭제</button>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }

        function editSchedule(id) {
            const schedule = schedules.find(s => s.id === id);
            if (!schedule) return;
            
            document.getElementById('eventTitle').value = schedule.title;
            document.getElementById('eventDate').value = schedule.date;
            document.getElementById('eventTime').value = schedule.time || '';
            document.getElementById('eventDescription').value = schedule.description || '';
            
            // 해당 일정 삭제 (저장 시 새로 추가됨)
            deleteScheduleWithoutConfirm(id);
            
            // 스크롤을 맨 위로 이동
            window.scrollTo(0, 0);
            
            // 탭 전환
            showTab('schedule');
        }

        function deleteSchedule(id) {
            if (confirm('이 일정을 삭제하시겠습니까?')) {
                deleteScheduleWithoutConfirm(id);
                alert('일정이 삭제되었습니다.');
            }
        }

        function deleteScheduleWithoutConfirm(id) {
            schedules = schedules.filter(schedule => schedule.id !== id);
            localStorage.setItem('schedules', JSON.stringify(schedules));
            loadSchedules();
            renderScheduleCalendar();
            
            // 선택된 날짜가 있다면 해당 날짜의 이벤트 목록 업데이트
            if (selectedDate) {
                const selectedDateObj = new Date(currentScheduleYear, currentScheduleMonth, selectedDate);
                showEventsForDate(selectedDateObj);
            }
        }

        
function showCalendarView() {
    document.getElementById('viewListBtn')?.classList.remove('active');
    document.getElementById('viewCalendarBtn')?.classList.add('active');
    document.getElementById('listView')?.classList.remove('active');
    document.getElementById('calendarView')?.classList.add('active');

    renderScheduleCalendar();
}


        function showListView() {
            document.getElementById('viewListBtn').classList.add('active');
            document.getElementById('viewCalendarBtn').classList.remove('active');
            document.getElementById('listView').classList.add('active');
            document.getElementById('calendarView').classList.remove('active');
        }

function renderScheduleCalendar() {
    const calendarDays = document.getElementById('calendarDays');
    const currentMonthYear = document.getElementById('currentMonthYear');
    
    if (!calendarDays || !currentMonthYear) return;
    
    // 월/년 헤더 설정
    currentMonthYear.textContent = `${currentScheduleYear}년 ${currentScheduleMonth + 1}월`;
    
    // 현재 월의 첫날
    const firstDay = new Date(currentScheduleYear, currentScheduleMonth, 1);
    
    // 현재 월의 마지막 날
    const lastDay = new Date(currentScheduleYear, currentScheduleMonth + 1, 0);
    
    // 첫날의 요일 (0: 일요일, 6: 토요일)
    const firstDayWeekday = firstDay.getDay();
    
    // 달력 셀 초기화
    calendarDays.innerHTML = '';
    
    // 이전 달 날짜 채우기
    for (let i = 0; i < firstDayWeekday; i++) {
        const dayDiv = document.createElement('div');
        dayDiv.className = 'calendar-day other-month';
        dayDiv.innerHTML = `<div class="day-number"></div>`;
        calendarDays.appendChild(dayDiv);
    }
    
    // 오늘 날짜 정보
    const today = new Date();
    const todayDate = today.getDate();
    const todayMonth = today.getMonth();
    const todayYear = today.getFullYear();
    
    // 현재 달 날짜 채우기
    for (let i = 1; i <= lastDay.getDate(); i++) {
        const dayDiv = document.createElement('div');
        dayDiv.className = 'calendar-day';
        
        // 오늘 날짜 표시
        if (i === todayDate && currentScheduleMonth === todayMonth && currentScheduleYear === todayYear) {
            dayDiv.classList.add('today');
        }
        
        // 선택된 날짜 표시
        if (i === selectedDate && currentScheduleMonth === currentScheduleMonth && currentScheduleYear === currentScheduleYear) {
            dayDiv.classList.add('selected');
        }
        
        // 날짜에 해당하는 이벤트 확인
        const dateString = `${currentScheduleYear}-${String(currentScheduleMonth + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
        const dateEvents = schedules.filter(schedule => schedule.date === dateString);
        
        // 이벤트가 있으면 표시
        if (dateEvents.length > 0) {
            dayDiv.classList.add('has-events');
            
            // 이벤트 항목 추가 (모든 이벤트 표시)
            const eventListDiv = document.createElement('div');
            eventListDiv.className = 'event-list';
            
            // 모든 이벤트 표시 (제한 없음)
            for (let j = 0; j < dateEvents.length; j++) {
                const eventDiv = document.createElement('div');
                eventDiv.className = 'event-item';
                eventDiv.textContent = dateEvents[j].title;
                eventListDiv.appendChild(eventDiv);
            }
            
            dayDiv.appendChild(eventListDiv);
        }
        
        // 날짜 번호 추가
        const dayNumber = document.createElement('div');
        dayNumber.className = 'day-number';
        dayNumber.textContent = i;
        dayDiv.appendChild(dayNumber);
        
        // 클릭 이벤트 추가
        dayDiv.addEventListener('click', function() {
            // 이전에 선택된 날짜 클래스 제거
            const selectedDays = document.querySelectorAll('.calendar-day.selected');
            selectedDays.forEach(day => day.classList.remove('selected'));
            
            // 현재 선택된 날짜 표시
            this.classList.add('selected');
            selectedDate = i;
            
            // 선택된 날짜의 이벤트 표시
            const selectedDateObj = new Date(currentScheduleYear, currentScheduleMonth, i);
            showEventsForDate(selectedDateObj);
        });
        
        calendarDays.appendChild(dayDiv);
    }
    
    // 다음 달 날짜 채우기 (6주 채우기)
    const usedCells = firstDayWeekday + lastDay.getDate();
    const remainingCells = 42 - usedCells; // 7일 * 6주 = 42
    
    for (let i = 1; i <= remainingCells; i++) {
        const dayDiv = document.createElement('div');
        dayDiv.className = 'calendar-day other-month';
        dayDiv.innerHTML = `<div class="day-number"></div>`;
        calendarDays.appendChild(dayDiv);
    }
}

        function showEventsForDate(date) {
            const selectedDateEvents = document.getElementById('selectedDateEvents');
            if (!selectedDateEvents) return;
            
            const dateString = date.toISOString().split('T')[0];
            
            // 해당 날짜의 이벤트 필터링
            const dateEvents = schedules.filter(schedule => schedule.date === dateString);
            
            // 이벤트 목록 초기화
            selectedDateEvents.innerHTML = '';
            
            // 날짜 헤더 추가
            const dateHeader = document.createElement('h4');
            dateHeader.textContent = formatDate(dateString);
            selectedDateEvents.appendChild(dateHeader);
            
            if (dateEvents.length === 0) {
                const noEvents = document.createElement('p');
                noEvents.className = 'no-events';
                noEvents.textContent = '이 날짜에는 일정이 없습니다.';
                selectedDateEvents.appendChild(noEvents);
            } else {
                // 시간순으로 정렬
                dateEvents.sort((a, b) => {
                    if (!a.time) return 1;
                    if (!b.time) return -1;
                    return a.time.localeCompare(b.time);
                });
                
                // 이벤트 목록 생성
                dateEvents.forEach(event => {
                    const eventDiv = document.createElement('div');
                    eventDiv.className = 'event-day-item';
                    
                    eventDiv.innerHTML = `
                        <div class="event-time">${event.time || '종일'}</div>
                        <div class="event-title">${event.title}</div>
                        ${event.description ? `<div class="event-desc">${event.description}</div>` : ''}
                        <div style="text-align: right; margin-top: 10px;">
                            <button onclick="editSchedule(${event.id})">수정</button>
                            <button class="delete-btn" onclick="deleteSchedule(${event.id})">삭제</button>
                        </div>
                    `;
                    
                    selectedDateEvents.appendChild(eventDiv);
                });
            }
        }

        function prevScheduleMonth() {
            currentScheduleMonth--;
            if (currentScheduleMonth < 0) {
                currentScheduleMonth = 11;
                currentScheduleYear--;
            }
            renderScheduleCalendar();
            
            // 선택된 날짜 초기화
            selectedDate = null;
            document.getElementById('selectedDateEvents').innerHTML = '<p class="no-events">날짜를 선택하면 일정이 표시됩니다.</p>';
        }

        function nextScheduleMonth() {
            currentScheduleMonth++;
            if (currentScheduleMonth > 11) {
                currentScheduleMonth = 0;
                currentScheduleYear++;
            }
            renderScheduleCalendar();
            
            // 선택된 날짜 초기화
            selectedDate = null;
            document.getElementById('selectedDateEvents').innerHTML = '<p class="no-events">날짜를 선택하면 일정이 표시됩니다.</p>';
        }

        /********** 가계부 기능 **********/
        function loadAccountData() {
            // 로컬 스토리지에서 가계부 데이터 로드
            let abData = JSON.parse(localStorage.getItem('accountData') || '[]');
            accountData = abData;
            
            // 가계부 목록 표시
            renderAccountList();
            
            // 가계부 요약 정보 업데이트
            updateAccountSummary();
            
            // 차트 업데이트 (Chart.js 사용)
            updateAccountCharts();
            
            // 가계부 달력 초기화 (FullCalendar 사용)
            // FullCalendar가 로드되면 호출됨
            if (typeof FullCalendar !== 'undefined') {
                initializeAccountCalendar();
            }
        }
        
        function addAccountItem() {
            const date = document.getElementById('ab-date').value;
            const amount = parseFloat(document.getElementById('ab-amount').value);
            const type = document.getElementById('ab-type').value;
            const category = document.getElementById('ab-category').value;
            const method = document.getElementById('ab-method').value;
            const memo = document.getElementById('ab-memo').value;
            
            if (!date || isNaN(amount) || amount <= 0) {
                alert('날짜와 금액은 필수입니다. 금액은 0보다 커야 합니다.');
                return;
            }
            
            const item = {
                id: Date.now(),
                date,
                amount,
                type,
                category,
                method,
                memo
            };
            
            // 새 항목 추가
            accountData.push(item);
            localStorage.setItem('accountData', JSON.stringify(accountData));
            
            // 입력 필드 초기화
            document.getElementById('ab-amount').value = '';
            document.getElementById('ab-memo').value = '';
            
            // 가계부 목록 및 요약 업데이트
            renderAccountList();
            updateAccountSummary();
            updateAccountCharts();
            
            // 달력 이벤트 업데이트 (FullCalendar 사용)
            const calendarEl = document.getElementById('ab-calendar');
            if (calendarEl && typeof FullCalendar !== 'undefined') {
                const calendar = FullCalendar.getCalendarById('account-calendar');
                if (calendar) {
                    // 기존 달력이 있으면 이벤트 추가
                    calendar.addEvent({
                        id: item.id.toString(),
                        title: `${item.type === 'income' ? '수입' : '지출'}: ${item.amount.toLocaleString()}원 (${item.category})`,
                        start: item.date,
                        color: item.type === 'income' ? '#4CAF50' : '#f44336',
                        extendedProps: {
                            amount: item.amount,
                            category: item.category,
                            method: item.method,
                            memo: item.memo
                        }
                    });
                } else {
                    // 달력이 없으면 초기화
                    initializeAccountCalendar();
                }
            }
            
            alert('가계부 항목이 추가되었습니다.');
        }
        
        function renderAccountList() {
            const tbody = document.querySelector('#ab-list tbody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            // 날짜 내림차순으로 정렬 (최신 항목이 위로)
            accountData.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            if (accountData.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" style="text-align:center;">등록된 내역이 없습니다.</td></tr>';
                return;
            }
            
            accountData.forEach(item => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${formatDate(item.date)}</td>
                    <td>${item.amount.toLocaleString()}원</td>
                    <td>${item.type === 'income' ? '수입' : '지출'}</td>
                    <td>${item.category}</td>
                    <td>${item.method}</td>
                    <td>${item.memo || '-'}</td>
                    <td>
                        <button class="delete-btn" onclick="deleteAccountItem(${item.id})">삭제</button>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }
        
        function deleteAccountItem(id) {
            if (confirm('이 항목을 삭제하시겠습니까?')) {
                accountData = accountData.filter(item => item.id !== id);
                localStorage.setItem('accountData', JSON.stringify(accountData));
                
                // 가계부 목록 및 요약 업데이트
                renderAccountList();
                updateAccountSummary();
                updateAccountCharts();
                
                alert('항목이 삭제되었습니다.');
            }
        }
        
        function updateAccountSummary() {
            const summaryEl = document.getElementById('ab-summary');
            if (!summaryEl) return;
            
            // 현재 월의 수입/지출 합계 계산
            const now = new Date();
            const currentMonth = now.getMonth() + 1;
            const currentYear = now.getFullYear();
            
            let income = 0, expense = 0;
            
            accountData.forEach(item => {
                const itemDate = new Date(item.date);
                const itemMonth = itemDate.getMonth() + 1;
                const itemYear = itemDate.getFullYear();
                
                if (itemMonth === currentMonth && itemYear === currentYear) {
                    if (item.type === 'income') {
                        income += item.amount;
                    } else {
                        expense += item.amount;
                    }
                }
            });
            
            // 요약 정보 표시
            summaryEl.innerHTML = `
                <strong>이번 달 수입:</strong> ${income.toLocaleString()}원 | 
                <strong>지출:</strong> ${expense.toLocaleString()}원 |
                <strong>잔액:</strong> ${(income - expense).toLocaleString()}원
            `;
        }
        
        function updateAccountCharts() {
            // Chart.js와 FullCalendar 라이브러리가 로드되었는지 확인
            let requiredLibraries = [];
            
            if (typeof Chart === 'undefined') {
                requiredLibraries.push({
                    name: 'Chart.js',
                    src: 'https://cdn.jsdelivr.net/npm/chart.js'
                });
            }
            
            if (typeof FullCalendar === 'undefined') {
                requiredLibraries.push({
                    name: 'FullCalendar',
                    src: 'https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.min.js'
                });
                
                // FullCalendar CSS도 추가
                const style = document.createElement('link');
                style.rel = 'stylesheet';
                style.href = 'https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.min.css';
                document.head.appendChild(style);
            }
            
            if (requiredLibraries.length > 0) {
                loadLibraries(requiredLibraries, 0, function() {
                    createCharts();
                    initializeAccountCalendar();
                });
                return;
            }
            
            createCharts();
            initializeAccountCalendar();
        }
        
        // 라이브러리 순차적 로드 함수
        function loadLibraries(libraries, index, callback) {
            if (index >= libraries.length) {
                callback();
                return;
            }
            
            const library = libraries[index];
            const script = document.createElement('script');
            script.src = library.src;
            script.onload = function() {
                loadLibraries(libraries, index + 1, callback);
            };
            document.head.appendChild(script);
        }
        
        // 가계부 달력 초기화 함수
        function initializeAccountCalendar() {
            const calendarEl = document.getElementById('ab-calendar');
            if (!calendarEl) return;
            
            // 달력에 표시할 이벤트 데이터 생성
            const events = accountData.map(item => ({
                id: item.id.toString(),
                title: `${item.type === 'income' ? '수입' : '지출'}: ${item.amount.toLocaleString()}원 (${item.category})`,
                start: item.date,
                color: item.type === 'income' ? '#4CAF50' : '#f44336',
                extendedProps: {
                    amount: item.amount,
                    category: item.category,
                    method: item.method,
                    memo: item.memo
                }
            }));
            
            // 기존에 초기화된 달력이 있는지 확인
            if (calendarEl.innerHTML) {
                try {
                    // 기존 달력이 있으면 초기화
                    calendarEl.innerHTML = '';
                } catch (e) {
                    console.error("달력 초기화 오류:", e);
                }
            }
            
            try {
                // FullCalendar 인스턴스 생성
                const calendar = new FullCalendar.Calendar(calendarEl, {
                    initialView: 'dayGridMonth',
                    headerToolbar: {
                        left: 'prev,next today',
                        center: 'title',
                        right: 'dayGridMonth,timeGridWeek'
                    },
                    events: events,
                    locale: 'ko',
                    height: '600px',
                    eventClick: function(info) {
                        // 이벤트 클릭 시 상세 정보 표시
                        const eventData = info.event;
                        const props = eventData.extendedProps;
                        
                        alert(`[${eventData.title}]
날짜: ${eventData.startStr}
금액: ${props.amount.toLocaleString()}원
카테고리: ${props.category}
결제방법: ${props.method}
메모: ${props.memo || '없음'}`);
                    },
                    datesSet: function(dateInfo) {
                        // 월 변경 시 해당 월의 수입/지출 합계 표시
                        const start = dateInfo.start;
                        const end = dateInfo.end;
                        
                        let monthIncome = 0, monthExpense = 0;
                        
                        accountData.forEach(item => {
                            const itemDate = new Date(item.date);
                            if (itemDate >= start && itemDate < end) {
                                if (item.type === 'income') {
                                    monthIncome += item.amount;
                                } else {
                                    monthExpense += item.amount;
                                }
                            }
                        });
                        
                        // 달력 위에 요약 정보 표시
                        const infoEl = document.createElement('div');
                        infoEl.className = 'fc-header-toolbar mt-2 mb-3';
                        infoEl.innerHTML = `
                            <div style="text-align:center; width:100%; font-weight:bold; padding:10px;">
                                ${dateInfo.view.title} - 
                                수입: <span style="color:#4CAF50">${monthIncome.toLocaleString()}원</span> | 
                                지출: <span style="color:#f44336">${monthExpense.toLocaleString()}원</span> | 
                                잔액: <span style="color:${monthIncome - monthExpense >= 0 ? '#4CAF50' : '#f44336'}">${(monthIncome - monthExpense).toLocaleString()}원</span>
                            </div>
                        `;
                        
                        // 기존 요약 정보가 있으면 제거
                        const existingInfo = calendarEl.querySelector('.fc-header-toolbar:not(:first-child)');
                        if (existingInfo) {
                            existingInfo.remove();
                        }
                        
                        // 새 요약 정보 추가
                        const header = calendarEl.querySelector('.fc-header-toolbar');
                        if (header) {
                            header.parentNode.insertBefore(infoEl, header.nextSibling);
                        }
                    }
                });
                
                // 달력 렌더링
                calendar.render();
            } catch (e) {
                console.error("FullCalendar 초기화 오류:", e);
                calendarEl.innerHTML = '<div style="padding: 20px; text-align: center; color: #f44336;">달력을 로드하는 중 오류가 발생했습니다.<br>페이지를 새로고침하거나 다른 탭을 클릭한 후 다시 시도해주세요.</div>';
            }
        }
        
        function createCharts() {
            // 차트 요소 가져오기
            const monthChart = document.getElementById('ab-month-summary');
            const categoryChart = document.getElementById('ab-category-summary');
            const methodChart = document.getElementById('ab-method-summary');
            
            if (!monthChart || !categoryChart || !methodChart) return;
            
            // 기존 차트 제거
            Chart.getChart(monthChart)?.destroy();
            Chart.getChart(categoryChart)?.destroy();
            Chart.getChart(methodChart)?.destroy();
            
            // 데이터 집계
            const monthData = { income: 0, expense: 0 };
            const categoryData = {};
            const methodData = {};
            
            accountData.forEach(item => {
                // 월별 수입/지출 집계
                monthData[item.type] += item.amount;
                
                // 지출 항목만 카테고리별 집계
                if (item.type === 'expense') {
                    if (!categoryData[item.category]) {
                        categoryData[item.category] = 0;
                    }
                    categoryData[item.category] += item.amount;
                    
                    // 결제 수단별 집계
                    if (!methodData[item.method]) {
                        methodData[item.method] = 0;
                    }
                    methodData[item.method] += item.amount;
                }
            });
            
            // 월별 수입/지출 차트
            new Chart(monthChart, {
                type: 'bar',
                data: {
                    labels: ['수입', '지출'],
                    datasets: [{
                        label: '금액',
                        data: [monthData.income, monthData.expense],
                        backgroundColor: ['#4CAF50', '#f44336']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: '수입/지출 비교'
                        }
                    }
                }
            });
            
            // 카테고리별 지출 차트
            new Chart(categoryChart, {
                type: 'pie',
                data: {
                    labels: Object.keys(categoryData),
                    datasets: [{
                        data: Object.values(categoryData),
                        backgroundColor: [
                            '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF',
                            '#FF9F40', '#8AC249', '#EA80FC', '#607D8B', '#E53935'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: '카테고리별 지출'
                        }
                    }
                }
            });
            
            // 결제 수단별 지출 차트
            new Chart(methodChart, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(methodData),
                    datasets: [{
                        data: Object.values(methodData),
                        backgroundColor: [
                            '#BCAAA4', '#90CAF9', '#FFE082', '#80DEEA', '#B0BEC5',
                            '#A5D6A7', '#F48FB1', '#CE93D8', '#FFF59D', '#FFAB91'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: '결제 수단별 지출'
                        }
                    }
                }
            });
        }

        /********** 홈화면 설정 기능 **********/
        function saveCustomHome() {
            const text = document.getElementById('text-input').value;
            const font = document.getElementById('font-select').value;
            const size = document.getElementById('font-size').value;
            const color = document.getElementById('font-color').value;
            const align = document.getElementById('text-align').value;
            
            // 로컬 스토리지에 저장
            localStorage.setItem("home_text", text);
            localStorage.setItem("home_font", font);
            localStorage.setItem("home_size", size);
            localStorage.setItem("home_color", color);
            localStorage.setItem("home_align", align);
            
            // 이미지 파일 처리
            const imageFile = document.getElementById('image-upload').files[0];
            if (imageFile) {
                const reader = new FileReader();
                reader.onload = e => {
                    localStorage.setItem("home_img", e.target.result);
                    localStorage.removeItem("home_video");
                    applyCustomHome();
                };
                reader.readAsDataURL(imageFile);
            }
            
            // 비디오 파일 처리
            const videoFile = document.getElementById('video-upload').files[0];
            if (videoFile) {
                const reader = new FileReader();
                reader.onload = e => {
                    localStorage.setItem("home_video", e.target.result);
                    localStorage.removeItem("home_img");
                    applyCustomHome();
                };
                reader.readAsDataURL(videoFile);
            }
            
            // 오디오 파일 처리
            const audioFile = document.getElementById('audio-upload').files[0];
            if (audioFile) {
                const reader = new FileReader();
                reader.onload = e => {
                    localStorage.setItem("home_audio", e.target.result);
                    applyCustomHome();
                };
                reader.readAsDataURL(audioFile);
            }
            
            // 설정을 즉시 적용
            applyCustomHome();
            
            alert("홈화면이 저장되었습니다!");
        }

        function applyCustomHome() {
            const text = localStorage.getItem("home_text");
            const font = localStorage.getItem("home_font");
            const size = localStorage.getItem("home_size");
            const color = localStorage.getItem("home_color");
            const align = localStorage.getItem("home_align");
            const img = localStorage.getItem("home_img");
            const video = localStorage.getItem("home_video");
            const audioSrc = localStorage.getItem("home_audio");

            const el = document.getElementById("preview-text");
            if (el && text) {
                el.textContent = text;
                el.style.fontFamily = font || 'inherit';
                el.style.fontSize = size || 'inherit';
                el.style.color = color || 'inherit';
                el.style.textAlign = align || 'inherit';
            }

            // media-preview 요소를 찾고 없으면 생성
            let media = document.getElementById("media-preview");
            if (!media) {
                // 헤더 다음에 media-preview 요소 생성
                const header = document.querySelector('header');
                if (header && header.nextElementSibling) {
                    media = document.createElement('div');
                    media.id = 'media-preview';
                    media.style.textAlign = 'center';
                    media.style.margin = '20px 0';
                    header.parentNode.insertBefore(media, header.nextElementSibling);
                }
            }

            // 이미지나 비디오가 없으면 media-preview를 표시하지 않음
            if (media) {
                if (video) {
                    media.innerHTML = '';
                    media.style.display = 'block';
                } else if (img) {
                    media.innerHTML = '<img src="' + img + '" alt="이미지" style="max-width:100%;">';
                    media.style.display = 'block';
                } else {
                    // 이미지나 비디오가 없으면 미디어 영역 숨김
                    media.innerHTML = '';
                    media.style.display = 'none';
                }
            }

            const bgm = document.getElementById("bgm");
            if (bgm && audioSrc) {
                bgm.src = audioSrc;
                bgm.play().catch(e => console.log("오디오 자동 재생 실패:", e));
            }
        }
        
        /********** 유틸리티 함수 **********/
        function formatDate(dateString) {
            const date = new Date(dateString);
            return `${date.getFullYear()}년 ${date.getMonth() + 1}월 ${date.getDate()}일`;
        }
        
        function formatDateTime(dateString) {
            const date = new Date(dateString);
            return `${date.getFullYear()}년 ${date.getMonth() + 1}월 ${date.getDate()}일 ${date.getHours()}시 ${String(date.getMinutes()).padStart(2, '0')}분`;
        }

// 텍스트 에디터 CSS 스타일
const textEditorCSS = `
/* 텍스트 에디터 스타일 */
.text-editor-container {
    border: 1px solid #ddd;
    border-radius: 5px;
    overflow: hidden;
    margin-bottom: 15px;
}

.text-editor-toolbar {
    background-color: #f5f5f5;
    padding: 8px;
    border-bottom: 1px solid #ddd;
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
}

.text-editor-toolbar button {
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 3px;
    padding: 5px 8px;
    margin: 0;
    cursor: pointer;
    color: #333;
    font-size: 14px;
}

.text-editor-toolbar button:hover {
    background-color: #f0f0f0;
}

.text-editor-toolbar button.active {
    background-color: #e8e8e8;
    color: #000;
}

.text-editor-toolbar select {
    height: 30px;
    border: 1px solid #ddd;
    border-radius: 3px;
    background-color: #fff;
    padding: 0 5px;
    min-width: 100px;
}

.text-editor-toolbar .color-picker {
    height: 30px;
    width: 30px;
    padding: 0;
    border: 1px solid #ddd;
    border-radius: 3px;
    cursor: pointer;
}

.text-editor-content {
    min-height: 150px;
    padding: 10px;
    background-color: #fff;
    overflow-y: auto;
    line-height: 1.6;
}

.text-editor-content:focus {
    outline: none;
    box-shadow: 0 0 3px rgba(0, 0, 0, 0.2) inset;
}

/* 툴바 그룹 스타일 */
.toolbar-group {
    display: flex;
    align-items: center;
    gap: 5px;
    padding-right: 8px;
    margin-right: 8px;
    border-right: 1px solid #ddd;
}

.toolbar-group:last-child {
    border-right: none;
}

/* 폰트 미리보기 스타일 */
.font-preview {
    font-size: 14px;
}

/* 각 폰트 패밀리에 대한 스타일 */
.arial { font-family: Arial, sans-serif; }
.nanum-gothic { font-family: "Nanum Gothic", "맑은 고딕", sans-serif; }
.malgun-gothic { font-family: "Malgun Gothic", "맑은 고딕", sans-serif; }
.gulim { font-family: "Gulim", sans-serif; }
.batang { font-family: "Batang", serif; }
.times { font-family: "Times New Roman", serif; }
.georgia { font-family: "Georgia", serif; }
.courier { font-family: "Courier New", monospace; }

/* 웹 폰트 로드 */
@import url('https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap');
`;

// 일기장과 메모장에 텍스트 에디터를 추가하는 함수
function addTextEditorFunctionality() {
    // 텍스트 에디터 CSS 스타일 추가
    const styleElement = document.createElement('style');
    styleElement.textContent = textEditorCSS;
    document.head.appendChild(styleElement);
    
    // 일기장 텍스트 에디터 추가
    setupTextEditor('diaryContent', 'diary-editor', 6);
    
    // 메모장 텍스트 에디터 추가
    setupTextEditor('memoContent', 'memo-editor', 4);
    
    // 텍스트 에디터 저장 시 HTML 내용을 hidden input에 저장하도록 훅 추가
    const originalSaveDiary = window.saveDiary;
    window.saveDiary = function() {
        const diaryEditor = document.getElementById('diary-editor');
        if (diaryEditor) {
            const diaryContent = document.getElementById('diaryContent');
            diaryContent.value = diaryEditor.innerHTML;
        }
        originalSaveDiary();
    };
    
    const originalSaveMemo = window.saveMemo;
    window.saveMemo = function() {
        const memoEditor = document.getElementById('memo-editor');
        if (memoEditor) {
            const memoContent = document.getElementById('memoContent');
            memoContent.value = memoEditor.innerHTML;
        }
        originalSaveMemo();
    };
    
    // 일기와 메모 로드 시 HTML 내용을 에디터에 표시하도록 훅 추가
    const originalEditDiary = window.editDiary;
    window.editDiary = function(id) {
        originalEditDiary(id);
        const diary = diaries.find(d => d.id === id);
        if (diary && document.getElementById('diary-editor')) {
            document.getElementById('diary-editor').innerHTML = diary.content;
        }
    };
    
    const originalEditMemo = window.editMemo;
    window.editMemo = function(id) {
        originalEditMemo(id);
        const memo = memos.find(m => m.id === id);
        if (memo && document.getElementById('memo-editor')) {
            document.getElementById('memo-editor').innerHTML = memo.content;
        }
    };
}

// 텍스트 에디터 설정 함수
function setupTextEditor(textareaId, editorId, rows) {
    const textarea = document.getElementById(textareaId);
    if (!textarea) return;
    
    // textarea를 숨기고 에디터 컨테이너 생성
    textarea.style.display = 'none';
    
    const editorContainer = document.createElement('div');
    editorContainer.className = 'text-editor-container';
    textarea.parentNode.insertBefore(editorContainer, textarea);
    
    // 툴바 생성
    const toolbar = document.createElement('div');
    toolbar.className = 'text-editor-toolbar';
    
    // 폰트 스타일 그룹
    const styleGroup = document.createElement('div');
    styleGroup.className = 'toolbar-group';
    
    // 볼드 버튼
    const boldBtn = document.createElement('button');
    boldBtn.innerHTML = '<b>B</b>';
    boldBtn.title = '굵게';
    boldBtn.onclick = function(e) { 
        e.preventDefault(); 
        document.getElementById(editorId).focus();
        document.execCommand('bold', false, null); 
    };
    
    // 이탤릭 버튼
    const italicBtn = document.createElement('button');
    italicBtn.innerHTML = '<i>I</i>';
    italicBtn.title = '기울임';
    italicBtn.onclick = function(e) { 
        e.preventDefault(); 
        document.getElementById(editorId).focus();
        document.execCommand('italic', false, null); 
    };
    
    // 밑줄 버튼
    const underlineBtn = document.createElement('button');
    underlineBtn.innerHTML = '<u>U</u>';
    underlineBtn.title = '밑줄';
    underlineBtn.onclick = function(e) { 
        e.preventDefault(); 
        document.getElementById(editorId).focus();
        document.execCommand('underline', false, null); 
    };
    
    // 취소선 버튼
    const strikeBtn = document.createElement('button');
    strikeBtn.innerHTML = '<s>S</s>';
    strikeBtn.title = '취소선';
    strikeBtn.onclick = function(e) { 
        e.preventDefault(); 
        document.getElementById(editorId).focus();
        document.execCommand('strikethrough', false, null); 
    };
    
    styleGroup.appendChild(boldBtn);
    styleGroup.appendChild(italicBtn);
    styleGroup.appendChild(underlineBtn);
    styleGroup.appendChild(strikeBtn);
    
    // 정렬 그룹
    const alignGroup = document.createElement('div');
    alignGroup.className = 'toolbar-group';
    
    // 왼쪽 정렬 버튼
    const alignLeftBtn = document.createElement('button');
    alignLeftBtn.innerHTML = '◀ 왼쪽';
    alignLeftBtn.title = '왼쪽 정렬';
    alignLeftBtn.onclick = function(e) { 
        e.preventDefault(); 
        document.getElementById(editorId).focus();
        document.execCommand('justifyLeft', false, null); 
    };
    
    // 가운데 정렬 버튼
    const alignCenterBtn = document.createElement('button');
    alignCenterBtn.innerHTML = '■ 가운데';
    alignCenterBtn.title = '가운데 정렬';
    alignCenterBtn.onclick = function(e) { 
        e.preventDefault(); 
        document.getElementById(editorId).focus();
        document.execCommand('justifyCenter', false, null); 
    };
    
    // 오른쪽 정렬 버튼
    const alignRightBtn = document.createElement('button');
    alignRightBtn.innerHTML = '▶ 오른쪽';
    alignRightBtn.title = '오른쪽 정렬';
    alignRightBtn.onclick = function(e) { 
        e.preventDefault(); 
        document.getElementById(editorId).focus();
        document.execCommand('justifyRight', false, null); 
    };
    
    alignGroup.appendChild(alignLeftBtn);
    alignGroup.appendChild(alignCenterBtn);
    alignGroup.appendChild(alignRightBtn);
    
    // 폰트 그룹
    const fontGroup = document.createElement('div');
    fontGroup.className = 'toolbar-group';
    
    // 폰트 종류 선택기 (개선된 버전)
    const fontSelector = document.createElement('select');
    fontSelector.title = '글꼴';
    fontSelector.id = editorId + '-font-selector';
    fontSelector.style.minWidth = '120px'; // 충분한 너비 확보
    
    // 폰트 선택 이벤트 핸들러 수정
    fontSelector.onchange = function() {
        applyFontToEditor(editorId, this.value);
    };
    
    // 폰트 옵션 - CSS 클래스와 함께 정의
    const fontOptions = [
        { value: 'Arial, sans-serif', text: 'Arial', className: 'arial' },
        { value: '"Nanum Gothic", "맑은 고딕", sans-serif', text: '나눔 고딕', className: 'nanum-gothic' },
        { value: '"Malgun Gothic", "맑은 고딕", sans-serif', text: '맑은 고딕', className: 'malgun-gothic' },
        { value: '"Gulim", sans-serif', text: '굴림', className: 'gulim' },
        { value: '"Batang", serif', text: '바탕', className: 'batang' },
        { value: '"Times New Roman", serif', text: 'Times New Roman', className: 'times' },
        { value: '"Georgia", serif', text: 'Georgia', className: 'georgia' },
        { value: '"Courier New", monospace', text: 'Courier New', className: 'courier' }
    ];
    
    // 옵션 추가 - 폰트 미리보기와 함께
    fontOptions.forEach(option => {
        const opt = document.createElement('option');
        opt.value = option.value;
        opt.textContent = option.text;
        opt.className = 'font-preview ' + option.className;
        // 기본값 설정 (Arial로 설정)
        if (option.text === 'Arial') opt.selected = true;
        fontSelector.appendChild(opt);
    });
    
    // 폰트 크기 선택기
    const sizeSelector = document.createElement('select');
    sizeSelector.title = '글자 크기';
    sizeSelector.id = editorId + '-size-selector';
    
    // 크기 선택 이벤트 핸들러 수정
    sizeSelector.onchange = function() {
        document.getElementById(editorId).focus();
        document.execCommand('fontSize', false, this.value);
        
        // 추가적인 스타일 적용 (일부 브라우저에서 더 잘 작동)
        const sizeStyles = {
            '1': '10px',
            '2': '13px',
            '3': '16px',
            '4': '18px',
            '5': '24px',
            '6': '32px',
            '7': '48px'
        };
        
        const selection = window.getSelection();
        if (selection.rangeCount > 0) {
            const fontElements = document.querySelectorAll(`font[size="${this.value}"]`);
            fontElements.forEach(el => {
                el.style.fontSize = sizeStyles[this.value];
            });
        }
    };
    
    const sizeOptions = [
        { value: '1', text: '아주 작게' },
        { value: '2', text: '작게' },
        { value: '3', text: '보통' },
        { value: '4', text: '크게' },
        { value: '5', text: '더 크게' },
        { value: '6', text: '아주 크게' },
        { value: '7', text: '최대 크게' }
    ];
    
    sizeOptions.forEach(option => {
        const opt = document.createElement('option');
        opt.value = option.value;
        opt.textContent = option.text;
        if (option.value === '3') opt.selected = true;
        sizeSelector.appendChild(opt);
    });
    
    fontGroup.appendChild(fontSelector);
    fontGroup.appendChild(sizeSelector);
    
    // 색상 그룹
    const colorGroup = document.createElement('div');
    colorGroup.className = 'toolbar-group';
    
    // 글자 색상 선택기
    const colorPicker = document.createElement('input');
    colorPicker.type = 'color';
    colorPicker.className = 'color-picker';
    colorPicker.title = '글자 색상';
    colorPicker.value = '#000000';
    colorPicker.onchange = function() { 
        document.getElementById(editorId).focus();
        document.execCommand('foreColor', false, this.value); 
    };
    
    // 배경 색상 선택기
    const bgColorPicker = document.createElement('input');
    bgColorPicker.type = 'color';
    bgColorPicker.className = 'color-picker';
    bgColorPicker.title = '배경 색상';
    bgColorPicker.value = '#ffffff';
    bgColorPicker.onchange = function() { 
        document.getElementById(editorId).focus();
        document.execCommand('hiliteColor', false, this.value); 
    };
    
    colorGroup.appendChild(colorPicker);
    colorGroup.appendChild(bgColorPicker);
    
    // 모든 그룹을 툴바에 추가
    toolbar.appendChild(styleGroup);
    toolbar.appendChild(alignGroup);
    toolbar.appendChild(fontGroup);
    toolbar.appendChild(colorGroup);
    
    // 편집 영역 생성
    const editorContent = document.createElement('div');
    editorContent.className = 'text-editor-content';
    editorContent.id = editorId;
    editorContent.contentEditable = 'true';
    editorContent.style.minHeight = (rows * 24) + 'px'; // 기존 textarea의 줄 수와 비슷한 높이
    editorContent.innerHTML = textarea.value;
    
    // 기본 글꼴 설정 (Arial)
    editorContent.style.fontFamily = 'Arial, sans-serif';
    
    // 에디터 컨테이너에 툴바와 편집 영역 추가
    editorContainer.appendChild(toolbar);
    editorContainer.appendChild(editorContent);
    
    // 편집 내용 변경 시 textarea 값 업데이트
    editorContent.oninput = function() {
        textarea.value = this.innerHTML;
    };
}

// 글꼴 적용 helper 함수
function applyFontToEditor(editorId, fontValue) {
    // 에디터에 포커스 주기
    const editor = document.getElementById(editorId);
    editor.focus();
    
    // 선택된 텍스트가 있는지 확인
    const selection = window.getSelection();
    const hasSelection = selection.toString().length > 0;
    
    try {
        if (hasSelection) {
            // 선택된 텍스트가 있으면 fontName 명령 실행
            document.execCommand('fontName', false, fontValue);
        } else {
            // 1. 현재 커서 위치의 텍스트 노드 찾기
            const range = selection.getRangeAt(0);
            const startNode = range.startContainer;
            
            // 2. 부모 요소에 직접 스타일 적용 (텍스트 노드의 경우)
            if (startNode.nodeType === Node.TEXT_NODE) {
                // 현재 부모 요소 찾기
                let parentElement = startNode.parentNode;
                
                // span으로 감싸고 스타일 적용
                const span = document.createElement('span');
                span.style.fontFamily = fontValue;
                
                // 현재 텍스트 노드를 새 span으로 감싸기
                const newRange = document.createRange();
                newRange.selectNode(startNode);
                newRange.surroundContents(span);
            } else {
                // 에디터 전체에 적용
                editor.style.fontFamily = fontValue;
                
                // 또는 새로운 텍스트를 입력할 위치를 마크하고 스팬으로 감싸기
                const span = document.createElement('span');
                span.style.fontFamily = fontValue;
                span.innerHTML = '​'; // 영 너비 공백 문자
                
                range.insertNode(span);
                range.setStart(span, 0);
                range.setEnd(span, 1);
                selection.removeAllRanges();
                selection.addRange(range);
            }
        }
        
        // font 태그에 직접 스타일 추가하여 강화
        setTimeout(() => {
            const fontElements = editor.querySelectorAll(`font[face="${fontValue}"]`);
            fontElements.forEach(el => {
                el.style.fontFamily = fontValue;
            });
        }, 10);
    } catch (e) {
        console.error('폰트 적용 중 오류 발생:', e);
        // 예비 방법: 선택 영역이 없거나 문제가 있으면 전체 적용
        editor.style.fontFamily = fontValue;
    }
}

// 페이지 로드 시 텍스트 에디터 기능 추가
document.addEventListener('DOMContentLoaded', function() {
    addTextEditorFunctionality();
});
    </script>
<script>
document.addEventListener("DOMContentLoaded", function () {
    loadInitialData();
});
</script>

</body></html>
</div>
<script>
  function checkPassword(event) {
  event.preventDefault();
    const input = document.getElementById('password').value;
    const errorMsg = document.getElementById('error-msg');
    if (input === 'sik282') {
      document.getElementById('password-screen').style.display = 'none';
      document.getElementById('main-content').style.display = 'block';
    } else {
      errorMsg.textContent = '비밀번호가 틀렸습니다';
    }
  }
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    loadInitialData();
});
</script>

</body>
</html>
